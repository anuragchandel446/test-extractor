<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Navigation Test - Moon Stoners TTS Reader</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Custom Cosmic Theme -->
    <link rel="stylesheet" href="kc.css" />
</head>
<body data-page="test">
    <!-- Navigation -->
    <nav class="main-navigation" role="navigation" aria-label="Main navigation"></nav>
    
    <!-- Page Content -->
    <main class="page-content" role="main">
        <div class="container-fluid">
            <header class="page-header">
                <h1 class="page-title">
                    <i class="bi bi-check-circle"></i>
                    Navigation Test
                </h1>
                <p class="page-subtitle">Testing the multi-page navigation system</p>
            </header>

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Navigation Test Results</h5>
                        </div>
                        <div class="card-body">
                            <div id="testResults">
                                <p class="text-muted">Running navigation tests...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Quick Navigation Test</h5>
                        </div>
                        <div class="card-body">
                            <p>Test navigation to all pages:</p>
                            <div class="d-flex gap-2 flex-wrap">
                                <a href="dashboard.html" class="btn btn-primary">
                                    <i class="bi bi-house me-1"></i>Dashboard
                                </a>
                                <a href="tts.html" class="btn btn-success">
                                    <i class="bi bi-volume-up me-1"></i>Text-to-Speech
                                </a>
                                <a href="ocr.html" class="btn btn-info">
                                    <i class="bi bi-camera me-1"></i>OCR Tools
                                </a>
                                <a href="translation.html" class="btn btn-warning">
                                    <i class="bi bi-translate me-1"></i>Translation
                                </a>
                                <a href="voice-input.html" class="btn btn-secondary">
                                    <i class="bi bi-mic me-1"></i>Voice Input
                                </a>
                                <a href="settings.html" class="btn btn-dark">
                                    <i class="bi bi-gear me-1"></i>Settings
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Authentication Database -->
    <script src="auth-db.js"></script>
    <!-- Shared Navigation -->
    <script src="shared-navigation.js"></script>
    
    <script>
        // Authentication check
        const isLoggedIn = localStorage.getItem('kc_logged_in');
        const currentUser = localStorage.getItem('kc_user');
        
        if(!(isLoggedIn === '1')){
            window.location.href = 'login.html';
        }

        // Test navigation system
        function runNavigationTests() {
            const results = [];
            
            // Test 1: Check if navigation manager is loaded
            if (window.navigationManager) {
                results.push('‚úÖ Navigation Manager loaded successfully');
            } else {
                results.push('‚ùå Navigation Manager not found');
            }
            
            // Test 2: Check if shared state is available
            if (window.sharedState) {
                results.push('‚úÖ Shared State system loaded');
            } else {
                results.push('‚ùå Shared State system not found');
            }
            
            // Test 3: Check if navigation config is available
            if (window.navigationConfig) {
                results.push('‚úÖ Navigation Configuration loaded');
                results.push(`üìä Found ${window.navigationConfig.pages.length} navigation pages`);
            } else {
                results.push('‚ùå Navigation Configuration not found');
            }
            
            // Test 4: Check if navigation is rendered
            const navElement = document.querySelector('.main-navigation .nav-container');
            if (navElement) {
                results.push('‚úÖ Navigation UI rendered successfully');
            } else {
                results.push('‚ùå Navigation UI not rendered');
            }
            
            // Test 5: Check current page detection
            if (window.navigationManager && window.navigationManager.currentPage) {
                results.push(`‚úÖ Current page detected: ${window.navigationManager.currentPage}`);
            } else {
                results.push('‚ùå Current page detection failed');
            }
            
            // Test 6: Check authentication state
            if (isLoggedIn === '1') {
                results.push('‚úÖ User authentication verified');
                results.push(`üë§ Current user: ${currentUser}`);
            } else {
                results.push('‚ùå User authentication failed');
            }
            
            // Display results
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = `
                <h6>Test Results:</h6>
                <ul class="list-unstyled">
                    ${results.map(result => `<li class="mb-1">${result}</li>`).join('')}
                </ul>
                <div class="mt-3">
                    <small class="text-muted">Test completed at ${new Date().toLocaleTimeString()}</small>
                </div>
            `;
        }

        // Run tests after navigation loads
        setTimeout(runNavigationTests, 1000);

        console.log('Navigation test page loaded');
    </script>
</body>
</html>
</content>