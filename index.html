<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Moon Stoners TTS Reader</title>
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- Bootstrap Icons -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
		<!-- Google Fonts -->
		<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
		<!-- Custom Cosmic Theme -->
		<link rel="stylesheet" href="kc.css" />
	</head>
	<body>

		
		<div class="container-fluid app">
			<!-- Navigation Breadcrumb -->
			<nav aria-label="Breadcrumb" class="breadcrumb-nav">
				<ol class="breadcrumb">
					<li class="breadcrumb-item">
						<a href="dashboard.html" class="breadcrumb-link">
							<i class="bi bi-house me-1" aria-hidden="true"></i>
							Dashboard
						</a>
					</li>
					<li class="breadcrumb-item active" aria-current="page">
						All-in-One Interface
					</li>
				</ol>
			</nav>

			<header class="app-header" role="banner">
				<div class="header-brand">
					<div class="logo">
						<img id="appLogo" src="./assets/moon-stoners.png" alt="Moon Stoners TTS Reader logo" />
					</div>
					<div class="brand">
						<h1>
							<i class="bi bi-grid-3x3-gap me-2" aria-hidden="true"></i>
							All-in-One Interface
						</h1>
						<p class="brand-subtitle">Complete TTS suite in one powerful interface</p>
					</div>
				</div>
				<div class="header-actions">
					<div class="user-info" role="complementary" aria-label="User information">
						<small class="user-welcome">Welcome,</small>
						<div id="userGreeting" class="user-name">
							Loading...
						</div>
					</div>
					<button id="logoutBtn" class="btn btn-outline-light btn-sm" aria-label="Logout from application">
						<i class="bi bi-box-arrow-right" aria-hidden="true"></i>
						<span>Logout</span>
					</button>
				</div>
			</header>

			<main class="app-main" role="main">
				<div class="main-layout">
					<!-- Text Editor Section -->
					<section class="editor-section" aria-labelledby="editor-heading">
						<div class="card editor-panel">
							<div class="card-body">
								<div class="editor">
									<h2 id="editor-heading" class="section-title">
										<i class="bi bi-textarea-t me-2" aria-hidden="true"></i>
										Text Editor
									</h2>
									<label for="text" class="form-label">
										Text to read
									</label>
									<textarea 
										id="text" 
										class="form-control" 
										rows="12" 
										placeholder="Type or paste text here, or use the file button to load a .txt file."
										aria-describedby="text-help"
									></textarea>
									<div id="text-help" class="form-text">
										Enter text to be read aloud using text-to-speech functionality.
									</div>
								
								<!-- Reading Controls -->
								<div class="reading-controls mt-2 mb-2">
									<div class="d-flex gap-2 justify-content-end">
										<button id="readFromCursor" class="btn btn-info btn-sm" title="Start reading from cursor position">
											<i class="bi bi-cursor-text me-1"></i>From Cursor
										</button>
										<button id="readSelection" class="btn btn-secondary btn-sm" title="Read selected text">
											<i class="bi bi-selection me-1"></i>Read Selection
										</button>
									</div>
								</div>
								
								<div id="tokenized" class="tokenized mt-3" hidden aria-hidden="true"></div>

								<div class="toolbar mt-3 p-3 rounded">
									<div class="row g-2 align-items-center">
										<div class="col-md-6">
											<div class="d-flex flex-wrap gap-2 align-items-center">
												<label class="btn btn-primary btn-sm" for="file">
													<i class="bi bi-upload me-1"></i>Upload File
												</label>
												<input id="file" type="file" accept=".txt" class="d-none" />
												<div class="form-check">
													<input id="fileAutoSpeak" type="checkbox" class="form-check-input" />
													<label class="form-check-label small" for="fileAutoSpeak">Auto speak</label>
												</div>
												<button id="loadSample" class="btn btn-outline-light btn-sm">
													<i class="bi bi-file-text me-1"></i>Sample
												</button>
											</div>
										</div>

										<div class="col-md-6 text-center">
											<div class="center-controls d-inline-flex gap-2 p-2 rounded">
												<button id="prev" class="btn btn-outline-light btn-sm" title="Previous">
													<i class="bi bi-skip-backward-fill"></i>
												</button>
												<button id="play" class="btn btn-success" title="Play / Resume">
													<i class="bi bi-play-fill"></i>
												</button>
												<button id="pause" class="btn btn-warning" title="Pause">
													<i class="bi bi-pause-fill"></i>
												</button>
												<button id="stop" class="btn btn-danger" title="Stop">
													<i class="bi bi-stop-fill"></i>
												</button>
												<button id="next" class="btn btn-outline-light btn-sm" title="Next">
													<i class="bi bi-skip-forward-fill"></i>
												</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Right Panel: Tools & Settings -->
				<div class="col-lg-4">
					<div class="tools-panel">
						<div class="tools-and-settings">
							<!-- OCR Tools -->
							<div class="card control-group mb-3">
								<div class="card-header">
									<h6 class="mb-0"><i class="bi bi-camera me-2"></i>OCR Tools</h6>
								</div>
								<div class="card-body">
									<div class="row g-2 align-items-center mb-2">
										<div class="col-auto">
											<input id="imageFile" type="file" accept="image/*" class="form-control form-control-sm" />
										</div>
										<div class="col-auto">
											<button id="ocrExtract" class="btn btn-primary btn-sm">
												<i class="bi bi-eye me-1"></i>Extract
											</button>
										</div>
									</div>
									<div class="d-flex justify-content-between align-items-center">
										<div class="form-check">
											<input id="ocrAutoSpeak" type="checkbox" class="form-check-input" />
											<label class="form-check-label small" for="ocrAutoSpeak">Auto speak</label>
										</div>
										<small class="text-muted">Status: <span id="ocrStatus" class="badge bg-secondary">idle</span></small>
									</div>
								</div>
							</div>
							<div class="row g-2 mt-2">
								<div class="col-auto">
									<button id="cameraCaptureBtn" class="btn btn-outline-primary btn-sm">
										<i class="bi bi-camera me-1"></i>Camera
									</button>
								</div>
								<div class="col">
									<div id="imageDropZone" class="border border-dashed rounded p-2 text-center small text-muted">
										Drop image here or use camera
									</div>
								</div>
								<div class="col-auto">
									<div id="imagePreviewContainer" class="position-relative" style="width:80px;height:80px;">
										<img id="imagePreview" src="" alt="preview" class="img-thumbnail w-100 h-100 object-fit-cover" />
										<button id="playPreviewBtn" class="btn btn-success btn-sm position-absolute bottom-0 end-0" style="font-size:10px;">
											<i class="bi bi-play-fill"></i>
										</button>
									</div>
								</div>
							</div>
							<!-- Translation Tools -->
							<div class="card control-group mb-3">
								<div class="card-header">
									<h6 class="mb-0"><i class="bi bi-translate me-2"></i>Translation Tools</h6>
								</div>
								<div class="card-body">
									<div class="row g-2 align-items-center mb-2">
										<div class="col-auto">
											<label for="translateTo" class="form-label small mb-0">Translate to:</label>
										</div>
										<div class="col">
											<select id="translateTo" class="form-select form-select-sm">
												<!-- options populated by kc.js -->
											</select>
										</div>
										<div class="col-auto">
											<button id="translateBtn" class="btn btn-primary btn-sm">
												<i class="bi bi-arrow-left-right me-1"></i>Translate
											</button>
										</div>
									</div>
									<div class="d-flex justify-content-between align-items-center">
										<div class="form-check form-check-inline">
											<input id="translateReplace" type="checkbox" class="form-check-input" />
											<label class="form-check-label small" for="translateReplace">Replace</label>
										</div>
										<div class="form-check form-check-inline">
											<input id="translateSpeak" type="checkbox" class="form-check-input" />
											<label class="form-check-label small" for="translateSpeak">Auto speak</label>
										</div>
									</div>
								</div>
							</div>
							<!-- Voice Input Tools -->
							<div class="card control-group mb-3">
								<div class="card-header">
									<h6 class="mb-0"><i class="bi bi-mic me-2"></i>Voice Input</h6>
								</div>
								<div class="card-body">
									<div class="row g-2 align-items-center mb-2">
										<div class="col-auto">
											<label for="speechLang" class="form-label small mb-0">Language:</label>
										</div>
										<div class="col">
											<select id="speechLang" class="form-select form-select-sm">
												<!-- populated by kc.js -->
											</select>
										</div>
										<div class="col-auto">
											<button id="voiceInputBtn" class="btn btn-success btn-sm">
												<i class="bi bi-mic-fill me-1"></i>Start Voice Input
											</button>
										</div>
									</div>
									<div class="d-flex justify-content-between align-items-center mb-2">
										<div class="form-check form-check-inline">
											<input id="voiceReplace" type="checkbox" class="form-check-input" />
											<label class="form-check-label small" for="voiceReplace">Replace</label>
										</div>
										<div class="form-check form-check-inline">
											<input id="voiceSpeak" type="checkbox" class="form-check-input" />
											<label class="form-check-label small" for="voiceSpeak">Auto speak</label>
										</div>
										<div class="form-check form-check-inline">
											<input id="voiceAutoFormat" type="checkbox" class="form-check-input" />
											<label class="form-check-label small" for="voiceAutoFormat">Auto-format</label>
										</div>
									</div>
									<div class="d-flex justify-content-end">
										<small class="text-muted">Voice: <span id="voiceStatus" class="badge bg-secondary">idle</span></small>
									</div>
								</div>
							</div>
						</div>
	
						<!-- Voice Settings -->
						<div class="card control-group mb-3">
							<div class="card-header">
								<h6 class="mb-0"><i class="bi bi-person-voice me-2"></i>Voice Settings</h6>
							</div>
							<div class="card-body">
								<div class="row g-2 align-items-center mb-2">
									<div class="col-auto">
										<label for="voice" class="form-label small mb-0">Voice:</label>
									</div>
									<div class="col">
										<select id="voice" class="form-select form-select-sm"></select>
									</div>
									<div class="col-auto">
										<button id="voicePreview" class="btn btn-outline-primary btn-sm" title="Play a short preview of the selected voice">
											<i class="bi bi-volume-up me-1"></i>Preview
										</button>
									</div>
								</div>
								<div class="row g-2 align-items-center mb-2">
									<div class="col-auto">
										<label for="gender" class="form-label small mb-0">Gender:</label>
									</div>
									<div class="col">
										<select id="gender" class="form-select form-select-sm" aria-label="Preferred voice gender">
											<option value="any">Any</option>
											<option value="female">Female</option>
											<option value="male">Male</option>
										</select>
									</div>
									<div class="col-auto">
										<button id="suggestVoice" class="btn btn-outline-secondary btn-sm">
											<i class="bi bi-magic me-1"></i>Suggest
										</button>
									</div>
								</div>
								<div class="form-check mb-2">
									<input id="requireGender" type="checkbox" class="form-check-input" />
									<label class="form-check-label small" for="requireGender">Require preferred gender (no fallback)</label>
								</div>
								<div id="voiceWarning" class="text-muted small mb-2"></div>
								<div class="d-flex justify-content-between align-items-center">
									<button id="showVoices" class="btn btn-outline-light btn-sm" title="List installed voices">
										<i class="bi bi-list me-1"></i>List all voices
									</button>
								</div>
								<div id="voiceList" class="text-muted small mt-2" hidden style="max-height:180px;overflow:auto; background: var(--bg-input); padding: 8px; border-radius: 6px;"></div>
							</div>
						</div>
	
						<!-- Playback Settings -->
						<div class="card control-group mb-3">
							<div class="card-header">
								<h6 class="mb-0"><i class="bi bi-sliders me-2"></i>Playback Settings</h6>
							</div>
							<div class="card-body">
								<div class="mb-3">
									<label for="rate" class="form-label small d-flex justify-content-between">
										<span>Rate</span>
										<span id="rateVal" class="badge bg-secondary">1.0</span>
									</label>
									<input id="rate" type="range" class="form-range" min="0.5" max="2.0" step="0.1" value="1" />
								</div>
								<div class="mb-3">
									<label for="pitch" class="form-label small d-flex justify-content-between">
										<span>Pitch</span>
										<span id="pitchVal" class="badge bg-secondary">1.0</span>
									</label>
									<input id="pitch" type="range" class="form-range" min="0" max="2" step="0.1" value="1" />
								</div>
								<div class="mb-3">
									<label for="volume" class="form-label small d-flex justify-content-between">
										<span>Volume</span>
										<span id="volumeVal" class="badge bg-secondary">1.0</span>
									</label>
									<input id="volume" type="range" class="form-range" min="0" max="1" step="0.05" value="1" />
								</div>
								<div class="mb-3">
									<label for="segmentDelay" class="form-label small d-flex justify-content-between">
										<span>Sentence pause</span>
										<span><span id="segmentDelayVal" class="badge bg-secondary">200</span> ms</span>
									</label>
									<input id="segmentDelay" type="range" class="form-range" min="0" max="800" step="25" value="200" />
								</div>
								<div class="form-check">
									<input id="highlight" type="checkbox" class="form-check-input" checked />
									<label class="form-check-label small" for="highlight">Highlight words while reading</label>
								</div>
							</div>
						</div>
	
						<!-- Appearance Settings -->
						<div class="card control-group mb-3">
							<div class="card-header">
								<h6 class="mb-0"><i class="bi bi-palette me-2"></i>Appearance</h6>
							</div>
							<div class="card-body">
								<div class="form-check mb-3">
									<input id="bgAnimate" type="checkbox" class="form-check-input" checked />
									<label class="form-check-label small" for="bgAnimate">Animated background</label>
								</div>
								<div class="mb-2">
									<label for="bgSpeed" class="form-label small d-flex justify-content-between">
										<span>Animation Speed</span>
										<span id="bgSpeedVal" class="badge bg-secondary">1.0x</span>
									</label>
									<input id="bgSpeed" type="range" class="form-range" min="0.2" max="3.0" step="0.1" value="1.0" />
								</div>
							</div>
						</div>
	
						<!-- Status and Shortcuts -->
						<div class="card control-group mb-3">
							<div class="card-body">
								<div class="text-muted small mb-2">
									<strong>Keyboard Shortcuts:</strong><br>
									Space = Play/Pause · S = Stop · L = Load sample
								</div>
								<div class="d-flex justify-content-between align-items-center">
									<small class="text-muted">Status:</small>
									<span id="statusText" class="badge bg-success">idle</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>



			<footer class="app-footer">
				<div class="footer-content">
					<small class="text-secondary">
						© Moon Stoners TTS Reader — Professional Text-to-Speech Interface
					</small>
					<div class="footer-tech">
						<span class="tech-badge">Web Speech API</span>
						<span class="tech-badge">Bootstrap 5</span>
						<span class="tech-badge">Modern Design</span>
					</div>
				</div>
			</footer>
		</div>

		<!-- Bootstrap JavaScript -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
		<!-- Tesseract.js (OCR) loaded from CDN - v5 -->
		<script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
		<!-- Authentication Database -->
		<script src="auth-db.js"></script>
		<script src="kc.js"></script>
	</body>
</html>
